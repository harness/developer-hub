---
title: Impressions
sidebar_label: Impressions
description: ""
sidebar_position: 18
redirect_from:
- /docs/feature-management-experimentation/feature-management/faqs/is-the-feature-flag-impression-toggle-supported
- /docs/feature-management-experimentation/feature-management/impressions
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## Overview

Impressions occur whenever a visitor is assigned a feature flag treatment (i.e., variation). Impressions are valuable for debugging the FME SDK and for feature monitoring and experimentation. Impressions are generated by SDKs each time `getTreatment` is called. They are periodically sent back to Harness servers where they are stored and can be accessed for later use.

## Impression fields
Each impression contains these fields.

| Field | Description |
| --- | --- |
| Environment ID and name | Environment where the feature flag was evaluated. |
| Key | Key which was evaluated. |
| Label | Targeting rule in the definition that matched resulting in the treatment being returned. |
| Machine IP and name <br /> (only for Server-side SDKs) | Machine making the feature flag evaluation. |
| Reception timestamp | Time the impression was received by Harness FME. |
| SDK and version | Language and version of the SDK that was used in the evaluation. |
| Split name | Feature flag which was evaluated. |
| Split version number | Date and time of the last change to the targeting rule that the SDK used when it served the treatment. Valuable in understanding when a change made to a feature flag got picked up by the SDKs and whether one of the SDK instances is not picking up changes. |
| Timestamp | Time the customer was served the treatment. |
| Traffic type ID and name | Traffic type associated to the feature flag evaluated. |
| Treatment | Treatment that was returned. |

## Impression properties

Impression properties allow you to attach custom metadata to impressions generated by an FME SDK when calling `getTreatment`. These properties can be useful for debugging, Live Tail analysis, or downstream external analytics from third-party integrations such as Amplitude.

An example impression payload: 

```json
{
  "environmentId": "prod",
  "feature": "new_ui",
  "treatment": "on",
  "key": "user_12345",
  "timestamp": 1725682200000,
  "properties": { // Optional key-value pairs you can append to impressions
    "planType": "premium",
    "appVersion": "2.3.1",
    "region": "us-west"
  }
}
```

### Supported SDKs for impression properties

The following SDKs support appending custom properties for each `getTreatment` call: 

<Tabs queryString="impression-properties">
  <TabItem value="client-sdks" label="Client-side SDKs">
  
  | **Client-side SDK** | **Version that supports impression properties** |
  |----------------------|-----------------------------------------------|
  | [Android SDK](/docs/feature-management-experimentation/sdks-and-infrastructure/client-side-sdks/android-sdk#append-properties-to-impressions)          | 5.2.0 and later                               |
  | [Browser SDK](/docs/feature-management-experimentation/sdks-and-infrastructure/client-side-sdks/browser-sdk#append-properties-to-impressions)          | 1.2 and later                                 |
  | [Flutter Plugin](/docs/feature-management-experimentation/sdks-and-infrastructure/client-side-sdks/flutter-plugin#append-properties-to-impressions)          | 1.0.0 and later                            |
  | [iOS SDK](/docs/feature-management-experimentation/sdks-and-infrastructure/client-side-sdks/ios-sdk#append-properties-to-impressions)              | 3.2.0 and later                               |
  | [JavaScript SDK](/docs/feature-management-experimentation/sdks-and-infrastructure/client-side-sdks/javascript-sdk#append-properties-to-impressions)       | 11.2.0 and later                              |
  | [React SDK](/docs/feature-management-experimentation/sdks-and-infrastructure/client-side-sdks/react-sdk#append-properties-to-impressions)            | 2.1.0 and later                               |
  | [Redux SDK](/docs/feature-management-experimentation/sdks-and-infrastructure/client-side-sdks/redux-sdk#append-properties-to-impressions)            | 2.1.0 and later                               |
  
  </TabItem>
  <TabItem value="client-suites" label="SDK Suites">
  
  | **Client-side SDK Suite** | **Version that supports impression properties** |
  |----------------------|-----------------------------------------------|
  | [Android Suite](/docs/feature-management-experimentation/sdks-and-infrastructure/client-side-suites/android-suite#append-properties-to-impressions)     | 2.1.0 and later                                  |
  | [Browser Suite](/docs/feature-management-experimentation/sdks-and-infrastructure/client-side-suites/browser-suite#append-properties-to-impressions)     | 2.1.0 and later                                  |
  | [iOS Suite](/docs/feature-management-experimentation/sdks-and-infrastructure/client-side-suites/ios-suite#append-properties-to-impressions)         | 2.1.0 and later                                  |
  
  </TabItem>
  <TabItem value="server-sdks" label="Server-side SDKs">
  
  | **Server-side SDK** | **Version that supports impression properties** |
  |----------------------|-----------------------------------------------|
  | [Java SDK](/docs/feature-management-experimentation/sdks-and-infrastructure/server-side-sdks/java-sdk#append-properties-to-impressions)            | 4.15.0 and later                              |
  | [Node.js SDK](/docs/feature-management-experimentation/sdks-and-infrastructure/server-side-sdks/nodejs-sdk#append-properties-to-impressions)         | 11.2.0 and later                               |
  | [Ruby SDK](/docs/feature-management-experimentation/sdks-and-infrastructure/server-side-sdks/ruby-sdk#append-properties-to-impressions)         | 8.7.0 and later                                  |
  | [Python SDK](/docs/feature-management-experimentation/sdks-and-infrastructure/server-side-sdks/python-sdk#append-properties-to-impressions)         | 10.4.0 and later                               |

  </TabItem>
</Tabs>


## Tracking impressions

Impressions are tracked by each Harness FME SDK and are periodically sent to Harness backend servers.

## Toggle impression tracking on or off

Impression tracking is on by default, but can be turned off for a feature flag definition. By selectively toggling off impression tracking, you can control the volume of impressions sent to [third-party integrations](#integrations-for-impression-data).

:::info[The Track impressions toggle is environment-specific]
Feature flag definitions (including the **Track impressions** on/off setting) are environment-specific. This means you can turn impressions off for a flag in one environment, but continue tracking impressions for the flag in another environment.
:::

When impression tracking is toggled off, feature flag evaluations return treatments normally; however, metrics impact calculations and traffic per treatment is no longer shown in Harness FME. Specifically, toggling impression tracking off affects the following features:

* **Monitoring** for the feature flag definition does not populate the Traffic over time chart. The unique keys evaluated per treatment are not shown.

* **Metric impact** does not show metric results, because events are not attributed to treatments and metrics are not calculated.

* **Alerting** is disabled because metrics are not calculated.

* **Live tail** for the feature flag definition does not show incoming impressions.

* **Data export** does not include feature flag evaluation data for flag definitions when impression tracking was toggled off. Only impressions created while impression tracking was toggled on are retrieved and exported.

Toggling impressions on or off does not impact your [MTKs](/docs/feature-management-experimentation/management-and-administration/admin-best-practices/mtk-efficiency#what-is-an-mtk) (the number of unique keys for which you evaluate feature flags in a month) or [Account usage data](/docs/feature-management-experimentation/management-and-administration/account-usage#usage-data).

To turn impression tracking on or off:

1. Click the ellipses menu on a feature flag Definition tab, and select the **Track impressions** menu item.

   ![](../static/impressions-track-impressions-menu.png)

2. Click the **Impression tracking** toggle and click **Save**.

   ![](../static/impressions-toggle.png)

3. On the feature flag Definition tab, click **Review changes** and click **Save**.

When impression tracking is off, you will see "Impression tracking off" at the top right of the feature flag definition page. The arrows will also be grayed out (shown with tooltip) on the the feature flag definition card.

![](../static/impressions-tracking-visual-cues-1.png)

### Supported SDKs and customer-deployed components for impression tracking

The impression tracking toggle only works with supported FME SDKs and customer-deployed components. If the SDK you are using does not support the toggle, impressions will still be sent to Harness serversâ€”even if impression tracking is turned off for the feature flag definition.

![](../static/impressions-tracking-visual-cues-1.png)

:::info
If you are using an older SDK or customer-deployed component version that does not support the toggle, Harness recommend upgrading to a supported version to ensure that impression tracking behavior aligns with your feature flag settings.
:::

Use the following tables to verify that your SDK or customer-deployed component version supports the impression tracking toggle.

<Tabs queryString="impression-tracking">
  <TabItem value="client-sdks" label="Client-side SDKs">
  
  | **Client-side SDK** | **Version that supports SemVer** |
  |---------------------|----------------------------------|
  | Android SDK         | 5.1.0 and later                  |
  | Browser SDK         | 1.1.0 and later                  |
  | iOS SDK             | 3.1.0 and later                  |
  | JavaScript SDK      | 11.1.0 and later                 |
  | React Native SDK    | 1.1.0 and later                  |
  
  </TabItem>

  <TabItem value="server-sdks" label="Server-side SDKs">
  
  | **Server-side SDK**        | **Version that supports SemVer** |
  |----------------------------|----------------------------------|
  | Elixir Thin Client SDK     | See SplitD version               |
  | Go SDK                     | 6.7.0 and later                  |
  | Java SDK                   | 4.12.0 and later                 |
  | Node.js SDK                | 11.1.0 and later                 |
  | PHP Thin Client SDK        | See SplitD version               |
  | Python SDK                 | 10.2.0 and later                 |
  | Ruby SDK                   | 8.5.0 and later                  |
  
  </TabItem>

  <TabItem value="infra" label="Customer-deployed Components">
  
  | **Component**       | **Version that supports SemVer** |
  |---------------------|----------------------------------|
  | Split Daemon        | 1.5.0 and later                  |
  | Split Synchronizer  | 5.10.0 and later                 |
  
  </TabItem>
</Tabs>

## Viewing impressions in Harness

You can view incoming impressions in [Live tail](/docs/feature-management-experimentation/feature-management/monitoring-analysis/live-tail) within a feature flag's page or the Data hub, and export them based on query criteria in the Data hub's [Data export tab](/docs/feature-management-experimentation/feature-management/monitoring-analysis/export-data). If you do not see impressions arriving in Harness, ensure that your SDK is installed and functioning as expected. Tips for this are included in the [Live tail](/docs/feature-management-experimentation/feature-management/monitoring-analysis/live-tail) article. Contact us at [support@split.io](mailto:support@split.io) if you have any issues. 

:::important
Harness retains impression data for 90 days. Contact the [team at Harness FME](mailto:support@split.io) to learn more.
:::

## Targeting rule label
 
Targeting rules can be robust within Harness FME. For example, the following is a feature flag with two rules:

```
if user is in segment employees then split 100%:on,0%:off else
if user.location is in list ["california"] then split 100%:on,0%:off else
```

If a user is served the **on** treatment for this feature flag, the targeting rule label explains which of these rules the user matched. The targeting rule label is the summary of the rule that provides that explanation. The label is auto-generated and is valuable in understanding if your feature flag is working as expected. Here are the targeting rule labels for the feature flag shown above.

| **Rule** | **Targeting rule label** | 
| --- | --- | 
| `if user is in segment employees then split 100%:on, 0%:off` | `in segment employees` |
| `if user.location is in list ["california"] then split 100%:on,0%:off else` | `user.location in list ["california"]` |
 
Usually, a treatment is served because the customer matched a particular rule. In this case, the targeting rule label simply indicates the rule that matched. However, in other cases, the SDK serves a treatment even though no rule was matched. This table shows the *tarlabel* generated in those cases.
 
| **Special case** | **Treatment served** | **Targeting rule label** |
| --- | --- | --- |
| Feature flag was killed | [Default](/docs/feature-management-experimentation/feature-management/setup/default-treatment) | `killed` |
| No rule matched | [Default](/docs/feature-management-experimentation/feature-management/setup/default-treatment) | `no rule matched` |
| Feature flag was not found, for example, it may not have been downloaded by the SDK yet | [Control](/docs/feature-management-experimentation/feature-management/setup/control-treatment) | `definition not found` |
| There was an exception while evaluating treatment | [Control](/docs/feature-management-experimentation/feature-management/setup/control-treatment) | `exception`  |

If your impression tables are showing *not available*, consider upgrading your SDK and ensure that labels are enabled in the SDK configurations.

## Data security
 
*Labels* do not capture identifiable information about your customers. However, if you do not want the FME SDK to capture or send the label back to Harness servers, set `labelsEnabled` to `false` in the SDK advanced configuration.

Additionally, if you donâ€™t want to send a customer UUID to Harness as the key, you can hash that ID prior to calling getTreatment. If you decide to hash the ID, be sure to use a deterministic algorithm that results in the same hash value each time. In addition, if itâ€™s important to identify the treatment received by specific users, you must have your own method to be able to associate the hashed value with the actual user ID.

## Integrations for impression data

Use our integrations to push FME feature flag impression data to your existing platforms or your data warehouse for a comprehensive view of user engagement and other key user metrics. 

Integration documentation is available for the following:

- [Amazon S3](/docs/feature-management-experimentation/integrations/amazon-s3)
- [Amplitude](/docs/feature-management-experimentation/integrations/amplitude)
- [Full Story](/docs/feature-management-experimentation/integrations/fullstory)
- [Google Analytics](/docs/feature-management-experimentation/integrations/google-analytics)
- [Heap](/docs/feature-management-experimentation/integrations/heap)
- [NewRelic](/docs/feature-management-experimentation/integrations/new-relic)
- [Mixpanel](/docs/feature-management-experimentation/integrations/mixpanel)
- [mParticle](/docs/feature-management-experimentation/integrations/mparticle)
- [Quantum-Metric](/docs/feature-management-experimentation/integrations/quantummetric)
- [SmartBear Bugsnag](/docs/feature-management-experimentation/integrations/bugsnag)
- [Segment](/docs/feature-management-experimentation/integrations/segment)
- [Webhook (outgoing)](/docs/feature-management-experimentation/api/webhook/impressions/)
