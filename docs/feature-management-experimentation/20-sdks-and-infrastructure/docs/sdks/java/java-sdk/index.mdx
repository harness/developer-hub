---
title: FME Java SDK
sidebar_label: Java SDK
description: Java developer reference for working with FME on the server side
---

import DocCardList from '@theme/DocCardList';

This guide provides detailed information about our Java SDK. All of our SDKs are open source. Go to our [Java SDK GitHub repository](https://github.com/splitio/java-client) to see the source code.

## Language support

The Java SDK supports JDK8 and later.

## Initialization

To get started, set up Split in your code base using the following two steps.

### 1. Import the SDK into your project

Import the SDK into your project using one of the following two methods:

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

<Tabs
  values={[
    {label: 'Maven', value: 'maven'},
    {label: 'Gradle', value: 'gradle'}
  ]}>
  <TabItem value="maven">
```java
<dependency>
    <groupId>io.split.client</groupId>
    <artifactId>java-client</artifactId>
    <version>4.14.0</version>
</dependency>
```
  </TabItem>
  <TabItem value="gradle">
```java
compile 'io.split.client:java-client:4.14.0'
```
  </TabItem>
</Tabs>

If you cannot find the dependency, it may be due to the lag in the sync time between Sonatype and Maven central. In this case, use the following repository:

```java title="XML"
<repositories>
  <repository>
    <id>sonatype releases</id>
    <url>https://oss.sonatype.org/content/repositories/releases/</url>
  </repository>
</repositories>
```

### 2. Instantiate the SDK and create a new Split client

:::danger[If upgrading an existing SDK - Block until ready changes]
Starting version 3.0.1, SplitClientConfig#ready(int) is deprecated and migrated to a two part implementation:
* Set the desired value in `SplitClientConfig#setBlockUntilReadyTimeout(int)`.
* Call `SplitClient#blockUntilReady()` or `SplitManager#blockUntilReady()`.
:::

When the SDK is instantiated, it starts background tasks to update an in-memory cache with small amounts of data fetched from Split servers. This process can take up to a few hundred milliseconds, depending on the size of data. If the SDK is asked to evaluate which treatment to show to a customer for a specific feature flag while it's in this intermediate state, it may not have the data necessary to run the evaluation. In this case, the SDK does not fail, rather, it returns [the control treatment](https://help.split.io/hc/en-us/articles/360020528072-Control-treatment).

To make sure the SDK is properly loaded before asking it for a treatment, block until the SDK is ready. Do this by setting the desired wait using `.setBlockUntilReadyTimeout()` in the configuration and calling `blockUntilReady()` on the client. Do this all as a part of the startup sequence of your application.

We recommend instantiating the Split factory once as a singleton and reusing it throughout your application.

Use the code snippet below with your own API key. Configure the SDK with the SDK key for the Split environment that you would like to access. The SDK key is available in the Split user interface, on your Admin settings page, API keys section. Select a server-side SDK API key. See [API keys](https://help.split.io/hc/en-us/articles/360019916211) to learn more.

<Tabs
  groupId="java-sdk-lang-choice"
  values={[
    {label: 'Java', value: 'java'},
    {label: 'Kotlin', value: 'kotlin'},
  ]}>
  <TabItem value="java">
```java
import io.split.client.SplitClient;
import io.split.client.SplitClientConfig;
import io.split.client.SplitFactory;
import io.split.client.SplitFactoryBuilder;

SplitClientConfig config = SplitClientConfig.builder()
   .setBlockUntilReadyTimeout(10000)
   .build();

SplitFactory splitFactory = SplitFactoryBuilder.build("YOUR_SDK_KEY", config);
SplitClient client = splitFactory.client();
try {
    client.blockUntilReady();
} catch (TimeoutException | InterruptedException e) {
    // log & handle
}
```
  </TabItem>
  <TabItem value="kotlin">
```kotlin
import io.split.client.SplitClient
import io.split.client.SplitClientConfig
import io.split.client.SplitFactory
import io.split.client.SplitFactoryBuilder

val config: SplitClientConfig = SplitClientConfig.builder()
            .setBlockUntilReadyTimeout(10000)
            .build()
val splitFactory: SplitFactory = SplitFactoryBuilder.build("YOUR_SDK_KEY", config)
val client: SplitClient = splitFactory.client()
try {
    client.blockUntilReady()
} catch (e: Exception) {
    // log & handle
}
```
  </TabItem>
</Tabs>

Now you can start asking the SDK to evaluate treatments for your customers.

## Using the SDK

### Basic use

After you instantiate the SDK client, you can start using the `getTreatment` method of the SDK client to decide what version of your features your customers are served. The method requires the `FEATURE_FLAG_NAME` attribute that you want to ask for a treatment and a unique `key` attribute that corresponds to the end user that you are serving the feature to.

Then use an if-else-if block as shown below and insert the code for the different treatments that you defined in the Split user interface. Remember the final else branch in your code to handle the client returning the [control treatment](https://help.split.io/hc/en-us/articles/360020528072-Control-treatment).

<Tabs
  groupId="java-sdk-lang-choice"
  values={[
    {label: 'Java', value: 'java'},
    {label: 'Kotlin', value: 'kotlin'},
  ]}>
  <TabItem value="java">
```java
// The key here represents the ID of the user/account/etc you're trying to evaluate a treatment for
String treatment = client.getTreatment("key","FEATURE_FLAG_NAME");

if (treatment.equals("on")) {
    // insert code here to show on treatment
} else if (treatment.equals("off")) {
    // insert code here to show off treatment
} else {
    // insert your control treatment code here
}
```
  </TabItem>
  <TabItem value="kotlin">
```kotlin
// The key here represents the ID of the user/account/etc you're trying to evaluate a treatment for
val treatment = client.getTreatment("key","FEATURE_FLAG_NAME")

when (treatment) {
    "on" -> {
        // insert code here to show on treatment
    }
    "off" -> {
        // insert code here to show off treatment
    }
    else -> {
        // insert your control treatment code here
    }
}
```
  </TabItem>
</Tabs>

### More SDK features

<DocCardList />