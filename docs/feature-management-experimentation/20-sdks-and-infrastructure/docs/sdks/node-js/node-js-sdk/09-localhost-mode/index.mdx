---
title: Localhost mode
sidebar_label: Localhost mode
description: Develop and test without an internet connection. Read flag and segment definitions from a file.
---

For testing, a developer can put code behind feature flags on their development machine without the SDK requiring network connectivity. To achieve this, the Split SDK can be started in **localhost** mode (aka off-the-grid mode). In this mode, the SDK neither polls nor updates Split servers. Instead, it uses an in-memory data structure to determine what treatments to show to the logged in customer for each of the feature flags.

To use the SDK in localhost mode, set the `authorizationKey` config property to "localhost", as shown in the example below:

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

<Tabs
  groupId="javascript-sdk-lang-choice"
  values={[
    {label: 'JavaScript', value: 'javascript'},
    {label: 'TypeScript', value: 'typescript'},
  ]}>
  <TabItem value="javascript">
```javascript
var factory = SplitFactory({
  core: {
    authorizationKey: 'localhost'
  },
  features: path.join(__dirname, '.split'),
  scheduler: {
    offlineRefreshRate: 15 // 15 sec
  }
});

var client = factory.client();

client.on(client.Event.SDK_READY, function() {
  // The following code will be evaluated once the engine finalizes
  // the initialization
  var t1 = client.getTreatment('user_id', 'reporting_v2');
  var t2 = client.getTreatment('user_id', 'billing_updates');
  var t3 = client.getTreatment('user_id', 'navigation_bar_changes');
});
```
  </TabItem>
  <TabItem value="typescript">
```javascript
const factory: SplitIO.ISDK = SplitFactory({
  core: {
    authorizationKey: 'localhost'
  },
  features: path.join(__dirname, '.split'),
  scheduler: {
    offlineRefreshRate: 15 // 15 sec
  }
});

const client: SplitIO.IClient = factory.client();

client.on(client.Event.SDK_READY, function() {
  // The following code will be evaluated once the engine finalizes
  // the initialization
  const t1: SplitIO.Treatment = client.getTreatment('user_id', 'reporting_v2');
  const t2: SplitIO.Treatment = client.getTreatment('user_id', 'billing_updates');
  const t3: SplitIO.Treatment = client.getTreatment('user_id', 'navigation_bar_changes');
});
```
  </TabItem>
</Tabs>

In this mode, the SDK loads a mapping of feature flag name to treatment from a file at `$HOME/.split`. For a given feature flag, the treatment specified in the file is returned for every customer. Should you want to use another file, you just need to set the `features` key in the configuration object passed at instantiation time, to the full path of the desired file.

`getTreatment` calls for a feature flag only return the one treatment that you defined in the file. You can then change the treatment as necessary for your testing in the file. Any feature flag that is not provided in the `features` map returns [the control treatment](https://help.split.io/hc/en-us/articles/360020528072-Control-treatment) if the SDK is asked to evaluate them.

Here is a sample `.split` file. The format of this file is two columns separated by a whitespace. The left column is the feature flag name, and the right column is the treatment name.

```bash title="Text"
# this is a comment

reporting_v2 on # sdk.getTreatment(*, reporting_v2) will return 'on'

double_writes_to_cassandra off

new-navigation v3
```

**Since version 10.7.0**, our SDK supports a new type of localhost feature flag definition file, using the YAML format. This new format allows the user to map different keys to different treatments within a single feature flag, and also add configurations to them for a given treatment. The new format is a list of single-key maps (one per mapping split-keys-config), defined as follows:

```yaml title="YAML"
# - feature_name:
#     treatment: "treatment_applied_to_this_entry"
#     keys: ["single_key_or_list", "other_key_same_treatment"]
#     config: "{\"desc\" : \"this applies only to ON treatment\"}"
#
# Note that the "treatment" key is mandatory, but both "keys" and "config" are optional.

- my_feature:
    treatment: "on"
    keys: "mock_user_id"
    config: "{\"desc\" : \"this applies only to ON treatment\"}"
- some_other_feature:
    treatment: "off"
- my_feature:
    treatment: "off"
```

In the example above, we have 3 entries:
 * The first one defines that for feature flag `my_feature`, the key `mock_user_id` will return the treatment `on` and the `on` treatment will be tied to the configuration `{"desc" : "this applies only to ON treatment"}`.
 * The second entry defines that the feature flag `some_other_feature` will always return the `off` treatment and no configuration.
 * The third entry defines that `my_feature` will always return `off` for all keys that don't match another entry (in this case, any key other than `mock_user_id`).

In addition, there are some extra configuration parameters that can be used when instantiating the SDK in localhost mode.

| **Configuration** | **Description** | **Default value** |
| --- | --- | --- |
| scheduler.offlineRefreshRate | The refresh interval for the mocked feature flags treatments. | 15 |
| features | The path to the file with the mocked feature flag data. | `$HOME/.split`  |