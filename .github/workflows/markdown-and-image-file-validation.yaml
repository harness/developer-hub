name: MarkDown and Image Filename Validation

on:
  pull_request:

jobs:
  kebab-case-check:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
        with:
          fetch-depth: 2

      - name: Validate filenames
        run: |
          # Define color codes for output
          Red='\033[0;31m'
          Green='\033[0;32m'
          Yellow='\033[0;33m'
          Blue='\033[0;34m'
          Reset='\033[0m'

          echo -e "${Blue}Checking all changed Markdown and image files...${Reset}"

          # Initialize failure flag
          failure_flag=0

          # Get changed files and filter only relevant ones
          changed_files=$(git diff --name-only --diff-filter=d  HEAD^1 HEAD | grep -E '\.(md|jpg|png|jpeg|svg)$' | grep -E '^(docs|kb|community|roadmap|static|university|release-notes)/')
          echo "$changed_files" | while read -r file; do
            echo -e "${Yellow}$x. $file${Reset}"
            x=$((x + 1))
          done
          if [ -z "$changed_files" ]; then
            echo -e "${Green}No relevant files were changed in this PR.${Reset}"
            exit 0
          else
            echo -e "${Green}Relevent changes present.${Reset}"
            exit 1
          fi
